name: paypal-payment
description: Description of syncano-socket-paypal-subscription-payment
version: 0.0.1

keywords:
  - paypal
  - payment

endpoints:
  payment:
    description: Create, get, list and Update actions for paypal payment.
    long_description: >
      This comprises of four actions for `charges` resource.
      Make sure to use the request methods `POST` for creating payment, `PUT` for updating payment and `GET`
      for showing single payment details by ID and listing payments that were created. Kindly refer to
      https://developer.paypal.com/docs/api/payments/ for more details.
    parameters:
      payment_details:
        type: object
        description: Payment detail parameters for creating and updating a payment
        example: |
          {
            "intent": "sale",
            "payer": {
              "payment_method": "paypal"
            },
            "redirect_urls": {
              "return_url": "http://return.url",
              "cancel_url": "http://cancel.url"
            },
            "transactions": [{
              "item_list": {
                "items": [{
                  "name": "item",
                  "sku": "item",
                  "price": "1.00",
                  "currency": "USD",
                  "quantity": 1
                }]
              },
              "amount": {
                "currency": "USD",
                "total": "1.00"
              },
              "description": "This is the payment description."
            }]
          }
      payment_id:
        type: string
        description: The ID of the payment to update or retrieve.
        long_description: |
          Note that this is required for get and update and shouldn't be passed for create or list payaments.
        example: "PAY-5YK922393D847794YKER7MUI"
    response:
      mimetype: application/json
      examples:
        -
          exit_code: 200
          description: Success
          example: |
            {
              "id": "PAY-1B56960729604235TKQQIYVY",
              "create_time": "2017-09-22T20:53:43Z",
              "update_time": "2017-09-22T20:53:44Z",
              "state": "created",
              "intent": "sale",
              "payer": {
                "payment_method": "paypal"
              },
              "httpStatusCode": 201
              ...
            }
        -
          exit_code: 400
          description: Failed
          example: |
            {
              "name": "VALIDATION_ERROR",
              "details": [ ... ],
              "message": "Invalid request. See details.",
              "information_link": "https://developer.paypal.com/docs/api/payments/#errors",
              "httpStatusCode": 400
            }
  execute-payment:
    description: Endpoint executes a PayPal payment that the customer has approved.
    parameters:
      payment_id:
        type: string
        description: The ID of the payment to execute.
      payer_id:
        type: string
        description: The ID of the payer that PayPal passes in the return_url.
        example: "22393D847794YKER7MUI"
      transactions:
        type: array
        description: An array of transaction details. For execute the transactions object accepts only the amount object.
        example: |
          [
            {
              "amount": {
                "currency": "USD",
                "total": "1.00"
              }
            }
          ]
    response:
      mimetype: application/json
      examples:
        -
          exit_code: 200
          description: Success
          example: |
            {
              "id": "PAY-9N9834337A9191208KOZOQWI",
              "create_time": "2017-07-01T16:56:57Z",
              "update_time": "2017-07-01T17:05:41Z",
              "state": "approved",
              ...
            }
        -
          exit_code: 400
          description: Failed
          example: |
            {
              "name": "INVALID_RESOURCE_ID",
              "message": "The requested resource ID was not found",
              "httpStatusCode": 404,
              ...
            }
